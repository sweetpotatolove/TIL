# HDFS 및 챗봇 기능 적용
## 프로젝트 개요
- Hadoop과 LLM(대규모 언어 모델) 기반 RAG(Retrieval-Augmented Generation) 기법을 사용하여 콘텐츠 데이터 수집·저장·분석·챗봇 질의응답 시스템까지 구현하는 것을 목표로 함
- 콘텐츠 데이터를 대량으로 관리하기 위해 Hadoop HDFS 적용
- 콘텐츠 데이터를 간단한 RAG 구조와 Chatbot UI를 결합하여 사용자 질의응답 처리
  - 프로젝트 컨셉에 맞게 DB에 있는 내용을 읽고 AI가 대답할 수 있도록
  - 헛소리하는 AI 만들거면 그냥 gpt만 쓰는게 낫다
- 특정 콘텐츠 또는 전체 콘텐츠 데이터에 대한 질의응답 수행 가능

## 목표
- Hadoop HDFS 기반의 대용량 데이터 관리 경험
- 콘텐츠 데이터를 이용한 실시간 데이터 파이프라인 경험
- LangChain과 생성형 AI 프레임워크 및 서비스를 활용한 RAG 기반 생성형 AI 연동 경험
- Chatbot UI 설계 및 API 연동

## 준비사항
- 사용 데이터
  - 수집되는 실시간 콘텐츠 데이터
  - 수집 후 가공되어 전처리된 데이터
- 개발언어 / 프로그램
  - Hadoop: 대용량 파일 저장을 위한 HDFS 활용
  - Python: 데이터 분석, 전처리, LLM 연동
  - LangChain: RAG 구조 구현과 LLM 연동
  - Django REST Framework: RAG 기반 백엔드 구현
  - Vue.js: Chatbot UI 및 시각화 대시보드 구현

## 구현 방법
- 1) 하둡(Hadoop) 환경 구성
  - HDFS 클러스터를 구성하여 대용량 콘텐츠 데이터 저장
  - NameNode, DataNode 설정 후 HDFS에 데이터 업로드 및 다운로드 테스트

- 2) 실시간 데이터 수집 및 Preprocessing
  - Kafka를 통해 유입되는 콘텐츠 스트림을 Spark 또는 Flink로 실시간 처리
  - 콘텐츠 및 메타데이터 형태의 데이터를 전처리 후 DB / Elasticsearch / HDFS에 저장

- 3) RAG(Retrieval-Augmented Generation) 구조 기반 챗봇 구현
  - LangChain과 같은 라이브러리를 활용하여 콘텐츠 본문 제공하여 RAG 구조를 통해 정보 제공
  - 사용자 질문을 LLM(GPT 등)에 전달하기 전에, 프롬프트에 콘텐츠 전문을 포함하여 적절한 컨텍스트를 제공하므로 LLM은 컨텐츠를 참조하여 질문에 대한 답변 생성

- 4) Chatbot UI 및 결과 시각화
  - 콘텐츠 목록 및 콘텐츠별 질의응답이 가능한 웹 인터페이스 구성
  - 사용자 질문 입력 시 RAG 기반으로 추출된 답변을 실시간으로 보여줌
  - Vue.js 프레임워크를 활용한 Chatbot UI 구성

## 관통 프로젝트 가이드
- 1) PJT 내용
  - 데이터 수집 및 저장
    - Kafka로 수집한 데이터를 Flink로 전처리 후 HDFS에 저장
  - RAG 기반 질의응답
    - LangChain으로 구성된 프롬프트와 GPT를 사용하여 RAG 기반 챗봇 구축
  - 데이터 기반 질의응답
    - 최종적으로 구축된 전체 데이터 프로세스를 다이어그램으로 시각화하여 제시
  - 답변 정확도 및 성능 개선
    - 프롬프트 엔지니어링 및 임베딩 기법 개선을 통해 챗봇 성능 및 응답 정확도 강화

## 요구사항
- Hadoop(HDFS)을 활용한 컨텐츠 데이터 관리와 RAG를 적용한 컨텐츠 기반의 챗봇 시스템 구축
- 기본 기능
  - Hadoop 및 RAG 시스템 구현
    - Hadoop 설치 및 HDFS 데이터 저장 환경 구성 (기존에 파일 시스템으로 구현한 realtime, news_article 디렉토리 형태의 임시, 장기 저장소 HDFS로 변환)
    - RAG 모델 및 Langchain을 통한 프롬프트 엔지니어링 구현
    - DRF API 및 Vue.js UI를 통해 챗봇 질의응답 서비스 구현
- 요청 조건
  - Hadoop 환경 설정 및 데이터 저장, 관리 구현
  - 컨텐츠 내용을 바탕으로 한 Langchain Prompt 정의 및 구현(RAG 적용)
  - 챗봇 응답의 정확성 및 사용자 경험 고려

## 결과
- HDFS에 컨텐츠 데이터 저장 및 관리되는 시스템
- Langchain 및 GPT API를 활용한 챗봇 응답 기능
- LLM의 답변이 컨텐츠 내용을 근거로 생성

## 관통 프로젝트 가이드

## 추가 고려사항
- 고도화된 질의응답
  - LLM 답변의 정확도와 문맥 추출 최적화
  - 컨텐츠 맥락에 맞는 Prompt Engineering
- 요청 조건
  - Prompt Template을 최적화하여, 사용자의 질문 의도를 파악하고 적절한 답변을 생성
  - 컨텐츠 기반 답변 + 추가 참고 출처 안내
- 결과
  - 높은 정확도의 답변 생성 (RAG 성능 향상)

## 산출물
- Gitlab에 올라온 de-project 코드 기반의 레포지토리 지속적 커밋
- 이후 PJT도 해당 레포지토리에 이어 나가면서 개발

## 정리

| 구현 기능 | 체크 포인트 |
|---------|------------|
| HDFS 기반 데이터 저장 | 전처리된 컨텐츠 데이터 로컬 파일시스템에서 HDFS로 변경날짜/배치 단위 디렉토리 구조로 관리 |
| RAG 기반 질의응답 처리 | 사용자 질문 전에 컨텐츠 검색 단계 존재검색된 컨텐츠 프롬프트 컨텍스트로 전달Prompt Template에 컨텐츠 본문이 포함컨텐츠 범위 내에서만 답변하도록 제어 |
| 챗봇 API 구현 | Django REST Framework 기반 질의응답 API 구현API 요청과 응답의 흐름 |
| Chatbot UI 구현 | 웹 UI에서 질문 입력 및 응답 출력 가능응답이 실시간으로 사용자에게 전달 |

