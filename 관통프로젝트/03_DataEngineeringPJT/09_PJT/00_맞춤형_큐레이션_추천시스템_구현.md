# 맞춤형 큐레이션을 위한 추천 시스템 구현
## 목표
- 최종 목표는 사용자에 맞춰 콘텐츠를 선별해주는 AI 기반의 큐레이션 시스템을 구축하는 것입니다. 
  - Django Rest Framework와 PostgreSQL을 활용하여 백엔드 환경을 구성하고, OpenAI API와 벡터 서치(Vector Search) 기법을 통해 사용자의 선호도에 기반한 맞춤형 추천 시스템을 구현합니다.
- 이를 통해 콘텐츠의 코사인 유사도 등을 활용한 개인화 추천 로직을 제공하고, 향후 다양한 추천 알고리즘과 상호작용 이벤트(좋아요, 조회수 등)를 반영하여 큐레이션 품질을 높이는 데 목적을 둡니다.

- 임베딩 및 벡터 서치 기법을 이해하고 적용할 수 있다.
- Django Rest Framework를 통해 RESTful API 서버를 구축하고 관리할 수 있다.
- PostgreSQL에서 pgvector를 이용한 코사인 유사도 검색을 구현할 수 있다.
- 사용자 행동 데이터를 수집·분석하여 추천 시스템에 반영할 수 있다.

## 준비사항
### 사용 데이터
- 과정을 통해 수집되는 데이터
  - 또는 이미 수집된 데이터
- 데이터 콘텐츠에 대한 임베딩(embedding) 정보  
  (Embedding 관련 API기반 서비스 등 또는 사전 학습된 오픈소스 모델 학습 활용)
- 사용자 인터랙션(좋아요, 조회, 댓글 등) 데이터

### 개발언어/프로그램
- `Python` & `Django Rest Framework`: 백엔드 API 서버 구현
  - 유사도 계산 요청, 추천 로직
- `PostgreSQL`: pgvector 확장 기능을 사용해 벡터와 유사도 검색 구현
- `OpenAI API`: 내용 임베딩을 위한 모델 활용
- `pgvector`: 코사인 유사도(CosineDistance) 기반의 벡터 검색 가능

  ![alt text](image.png)

※ `관통프로젝트\03_DataEngineeringPJT\09_PJT\추천가이드\data-pjt4.md` 참고

## 구현 방법
### 1) 벡터 임베딩 생성
- OpenAI Embeddings API 등의 임베딩 모델 기반의 처리를 활용하여 콘텐츠 벡터화(Embedding)
- Django 모델에 임베딩 정보를 저장할 필드를 추가하여 벡터 데이터 관리

### 2) 사용자의 인터랙션 관리
- 사용자의 좋아요(Like), 조회수, 스크랩 등의 컴포넌트를 대상으로 한 상호작용을 별도로 저장
- 상호작용 종류에 따라 가중치를 다르게 부여하여 추후 분석에 활용

### 3) 추천 알고리즘
- 사용자 별 임베딩 정보를 분석하고, 코사인 유사도 등 관련성을 평가하여 수치가 높은 기준으로 콘텐츠를 추천
  - 사용자 취향 벡터 DB에서 만들어서 사용해도 됨
- Django ORM + pgvector를 사용하여 효율적으로 거리 계산
- 이미 좋아요 등 **사용자가 소비한 콘텐츠를 제외**하고, 노출되는 콘텐츠는 무작위로 섞는 등의 다양성 확보 방안 고민
  - 추천 결과 다양성 필요(한쪽에 편향XX)

### 4) 연관 콘텐츠(관련 콘텐츠) 노출
- 사용자가 확인 중인 콘텐츠와 유사한 콘텐츠를 추출  
  - 예시)
    - 사용자의 정보를 기반으로 해당 콘텐츠 위주로 제공하는 추천 기반의 콘텐츠들을 노출
    - 코사인 유사도 등 관련도가 높은 상위 n개(예: 5개)를 함께 노출

### 5) API 설계 및 로직 구현
- Django Rest Framework로 추천 콘텐츠 조회, 관련 콘텐츠 조회 등 API Endpoint 구성
- RESTful API 형태로 데이터를 제공하여 다양한 클라이언트(모바일, 웹 등)에서 활용 가능
- PostgreSQL + pgvector 환경 설정

## PJT 내용
- 데이터 수집
  - 크롤링 등을 통해 텍스트 및 이미지 데이터 확보
- AI 임베딩 생성
  - OpenAI API 등의 임베딩 모델을 활용해 콘텐츠를 벡터화
- 데이터베이스 저장
  - 서비스를 위한 OLTP 형의 데이터베이스인 PostgreSQL에 데이터와 임베딩을 벡터 형태로 저장 (pgvector 사용)
- 이외의 벡터 DB를 사용하는 것은 자유
- 추천 시스템
  - Django Rest Framework에서 사용자별로 추천하는 콘텐츠 제공 로직 구현
- 관련 콘텐츠 표시
  - 각 콘텐츠에 대해 유사도가 높은 콘텐츠 목록도 함께 출력

## 관통 프로젝트 가이드
### 요구사항 1
- 기본 기능
  - 유저 행동 기반으로 추천 시스템을 적용해서 Django Rest Framework 백엔드에 반영
- 데이터 분석 및 추천
  - 콘텐츠 임베딩 생성 및 데이터베이스 저장
  - 사용자 상호작용 정보를 활용한 추천 로직 구현
  - pgvector의 Cosine Similarity를 이용한 유사도 계산 (이외의 고도화된 방법을 활용할 수도 있음)
- 요청 조건
  - OpenAI API(또는 유사 AI 서비스)를 통해 임베딩 생성
  - Django Rest Framework로 API 구현
  - 벡터 검색 및 유사도 랭킹 활용
- 결과
  - 사용자 선호(좋아요, 조회 등)에 따라 추천된 콘텐츠 리스트
  - 해당 콘텐츠 목록을 반환하는 백엔드 엔드포인트(API)

### 요구사항 2
- 추천된 콘텐츠와 유사도가 높은 관련 콘텐츠 목록 제공
  - 요청 조건
  - 메인 추천 콘텐츠와 함께 상위 5개 유사 콘텐츠 조회 등 다양한 방식을 활용
  - 콘텐츠 간 유사도 계산 시 코사인 거리(Cosine Distance) 등 콘텐츠 유사도 판단 기준 활용
- 결과
  - 연관 콘텐츠를 JSON 형태(혹은 지정 형식)으로 함께 전달
  - 사용자에게 콘텐츠 간 맥락을 쉽게 파악할 수 있도록 도움

### 추가기능
- 추가 피처 엔지니어링 및 고급 알고리즘 적용
- 요청 조건
  - 기존 임베딩 외의 카테고리, 출처, 시간대 등을 고려한 멀티모달 추천 모델 적용 가능
  - 사용자 개인화(사용자 그룹화, 협업 필터링, 시계열 분석 등) 기법 적용 가능
- 결과
  - 향상된 추천 정확도 및 사용자별 차별화된 콘텐츠 큐레이션
  - 추천 성능 비교(기본 vs 고도화) 분석과 보고서 작성

## 산출물
- Gitlab에 올라온 de-project 코드 기반의 레포지토리 지속적 커밋
- 이후 PJT도 해당 레포지토리에 이어 나가면서 개발

## 정리

| 구현 기능 | 체크 포인트 |
|---------|------------|
| 데이터 임베딩 및 DB 저장 | 벡터화(임베딩) 정확도, pgvector 설정 여부 |
| Django Rest API 구현 | 추천 리스트 반환 및 API 정상 동작 |
| 관련 콘텐츠(연관 콘텐츠) 관련 추천 구현 | 유사 콘텐츠 목록, pgvector 등 vector 활용, 코사인 유사도 등 유사도 기준 활용 |
| 추가 피처 엔지니어링 및 고급 알고리즘 | 콘텐츠 카테고리, 시간대, 사용자 프로필 등 추가 고려 |